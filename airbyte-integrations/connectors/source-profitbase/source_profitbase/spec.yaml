documentationUrl: https://docsurl.com
connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Profitbase Spec
  type: object
  required:
    - account_number
    - api_key
  properties:
    account_number:
      type: string
      title: Номер Аккаунта ProfitBase
      description: Для корректного подключения через API, нужен номер аккаунта, который можно найти в личном кабинете
      airbyte_secret: true
      order: 0
    api_key:
      type: string
      title: API Ключ
      description: В этом поле указывается API ключ для аутентификации (Пример ключа- app-74b6b5734m56). Также, чтобы получить доступ к API, нужно чтобы IP откуда идет запрос, должен быть в WhiteList'e клиента, которому выгружаются данные. Подсказка поддержки ProfitBase - В целях безопасности мы добавляем IP адреса в список разрешенных только по запросу с е-мейла пользователя на нашу почту support@profitbase.ru, обладающего полными правами доступа в кабинете Profitbase. Другими словами должно быть выполнено два условия - E-mail должен быть добавлен в список пользователей вашего кабинета Profitbase.У пользователя с этим e-mail должны быть полные права доступа к кабинету Profitbase В письме необходимо указать номер аккаунта Profitbase (его можно увидеть в адресной строке в формате pb###... .), а также список IP, которые необходимо добавить.
      airbyte_secret: true
      order: 1
    crm:
      type: string
      title: Идентификатор crm (amo или bitrix)
      description: Этот параметр используется для стрима statuses, в зависимости от того что указано(amo или bitrix), оттуда будут взяты данные
      airbyte_secret: true
      order: 2
    history_stream:
      order: 3
      type: object
      title: Данные указываются для стрима history
      description:  Примечание - У парметра property_ids приоретет выше т.е при одновременной передаче пареметров фильтрации property_ids и house_ids, пареметр house_ids учитываться не будет
      required:
        - dealId
        - date_range
        - property_ids
      properties:
        property_ids:
          description: Примечание - У парметра property_ids приоретет выше т.е при одновременной передаче пареметров фильтрации property_ids и house_ids, пареметр house_ids учитываться не будет.
          examples:
            -  ["563563", "254524", "525245"]
          type: array
          title: property_ids - Массив идентификаторов помещений
          order: 0
        house_ids:
          type: array
          title: house_ids - Массив идентификаторов домов
          order: 1
        date_range:
          required:
            - date_from
            - date_to
          title: Дата выгрузки данных
          type: object
          order: 2
          properties:
            date_range_type:
              type: string
              const: custom_date
              order: 0

            date_from:
              title: Начало периода
              description: Начало периода в формате YYYY-MM-DD
              pattern: '^[0-9]{4}-[0-9]{2}-[0-9]{2}$'
              pattern_descriptor: YYYY-MM-DD
              examples:
                - '2023-05-01'
              order: 1
              type: string

            date_to:
              title: Конец периода
              description: Конец периода в формате YYYY-MM-DD
              pattern: '^[0-9]{4}-[0-9]{2}-[0-9]{2}$'
              pattern_descriptor: YYYY-MM-DD
              examples:
                - '2023-05-02'
              order: 2
              type: string
        dealId:
          type: string
          title: detailid - ID сделки в CRM системе
          order: 3